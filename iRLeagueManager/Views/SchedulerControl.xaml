<UserControl x:Class="iRLeagueManager.Views.SchedulerControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:iRLeagueManager.Views"
             xmlns:vmodel="clr-namespace:iRLeagueManager.ViewModels"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800" Background="White" FontSize="16">
    <UserControl.Resources>
        <Style TargetType="Button" x:Key="ButtonStyle">
            <Setter Property="TextElement.FontSize" Value="16" />
            <Setter Property="Margin" Value="5,2" />
            <Setter Property="Padding" Value="2,2" />
        </Style>
        <Style TargetType="Button" BasedOn="{StaticResource ButtonStyle}" />

        <Path x:Key="CursorMove" x:Shared="False"
              Data="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"
              Fill="{Binding RelativeSource={RelativeSource AncestorType={x:Type ContentControl}}, Path=Foreground}"/>
        <Path x:Key="PlusThick" x:Shared="False"
              Data="M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z"
              Fill="{Binding RelativeSource={RelativeSource AncestorType={x:Type ContentControl}}, Path=Foreground}"/>
        <Path x:Key="delete" x:Shared="False"
              Data="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"
              Fill="{Binding RelativeSource={RelativeSource AncestorType={x:Type ContentControl}}, Path=Foreground}"/>
        <Path x:Key="closeThick" x:Shared="False"
              Data="M20 6.91L17.09 4L12 9.09L6.91 4L4 6.91L9.09 12L4 17.09L6.91 20L12 14.91L17.09 20L20 17.09L14.91 12L20 6.91Z"
              Fill="{Binding RelativeSource={RelativeSource AncestorType={x:Type ContentControl}}, Path=Foreground}"/>
        <Path x:Key="closeOutlineRed" x:Shared="False"
              Data="M3,16.74L7.76,12L3,7.26L7.26,3L12,7.76L16.74,3L21,7.26L16.24,12L21,16.74L16.74,21L12,16.24L7.26,21L3,16.74M12,13.41L16.74,18.16L18.16,16.74L13.41,12L18.16,7.26L16.74,5.84L12,10.59L7.26,5.84L5.84,7.26L10.59,12L5.84,16.74L7.26,18.16L12,13.41Z"
              Fill="{Binding RelativeSource={RelativeSource AncestorType={x:Type ContentControl}}, Path=Foreground}"/>
        <Path x:Key="checkOutlineGreen" x:Shared="False"
          Data="M19.78,2.2L24,6.42L8.44,22L0,13.55L4.22,9.33L8.44,13.55L19.78,2.2M19.78,5L8.44,16.36L4.22,12.19L2.81,13.55L8.44,19.17L21.19,6.42L19.78,5Z"
              Fill="Green"/>
        <Path x:Key="checkBold" x:Shared="False"
              Data="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z" 
              Fill="{Binding RelativeSource={RelativeSource AncestorType={x:Type ContentControl}}, Path=Foreground}"/>
        <Path x:Key="pencilOutline" x:Shared="False"
              Data="M14.06,9L15,9.94L5.92,19H5V18.08L14.06,9M17.66,3C17.41,3 17.15,3.1 16.96,3.29L15.13,5.12L18.88,8.87L20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18.17,3.09 17.92,3 17.66,3M14.06,6.19L3,17.25V21H6.75L17.81,9.94L14.06,6.19Z"
              Fill="{Binding RelativeSource={RelativeSource AncestorType={x:Type ContentControl}}, Path=Foreground}"/>
        <Path x:Key="TableArrowUp" x:Shared="False"
              Data="M4 3H18C19.11 3 20 3.9 20 5V12.08C18.45 11.82 16.92 12.18 15.68 13H12V17H13.08C12.97 17.68 12.97 18.35 13.08 19H4C2.9 19 2 18.11 2 17V5C2 3.9 2.9 3 4 3M4 7V11H10V7H4M12 7V11H18V7H12M4 13V17H10V13H4M21.94 17.5H19.94V21.5H17.94V17.5H15.94L18.94 14.5L21.94 17.5"
              Fill="{Binding RelativeSource={RelativeSource AncestorType={x:Type ContentControl}}, Path=Foreground}"/>
        <Path x:Key="CogRefresh" x:Shared="False"
              Data="M18 14.5C19.1 14.5 20.1 14.9 20.8 15.7L22 14.5V18.5H18L19.8 16.7C19.3 16.3 18.7 16 18 16C16.6 16 15.5 17.1 15.5 18.5S16.6 21 18 21C18.8 21 19.5 20.6 20 20H21.7C21.1 21.5 19.7 22.5 18 22.5C15.8 22.5 14 20.7 14 18.5S15.8 14.5 18 14.5M11.5 18.5C11.5 17.4 11.8 16.4 12.2 15.5H12C10.1 15.5 8.5 13.9 8.5 12S10.1 8.5 12 8.5 15.5 10.1 15.5 12C15.5 12.2 15.5 12.4 15.4 12.5C16.2 12.2 17 12 18 12C18.5 12 19 12.1 19.5 12.2V12C19.5 11.7 19.5 11.3 19.4 11L21.5 9.4C21.7 9.2 21.7 9 21.6 8.8L19.6 5.3C19.5 5 19.3 5 19 5L16.5 6C16 5.6 15.4 5.3 14.8 5L14.4 2.3C14.5 2.2 14.2 2 14 2H10C9.8 2 9.5 2.2 9.5 2.4L9.1 5.1C8.5 5.3 8 5.7 7.4 6L5 5C4.7 5 4.5 5 4.3 5.3L2.3 8.8C2.2 9 2.3 9.2 2.5 9.4L4.6 11C4.6 11.3 4.5 11.7 4.5 12S4.5 12.7 4.6 13L2.5 14.7C2.3 14.9 2.3 15.1 2.4 15.3L4.4 18.8C4.5 19 4.7 19 5 19L7.5 18C8 18.4 8.6 18.7 9.2 19L9.6 21.7C9.6 21.9 9.8 22.1 10.1 22.1H12.6C11.9 21 11.5 19.8 11.5 18.5Z"
              Fill="{Binding RelativeSource={RelativeSource AncestorType={x:Type ContentControl}}, Path=Foreground}"/>
        <Path x:Key="TablePlus" x:Shared="False"
              Data="M18,14H20V17H23V19H20V22H18V19H15V17H18V14M4,3H18A2,2 0 0,1 20,5V12.08C18.45,11.82 16.92,12.18 15.68,13H12V17H13.08C12.97,17.68 12.97,18.35 13.08,19H4A2,2 0 0,1 2,17V5A2,2 0 0,1 4,3M4,7V11H10V7H4M12,7V11H18V7H12M4,13V17H10V13H4Z"
              Fill="{Binding RelativeSource={RelativeSource AncestorType={x:Type ContentControl}}, Path=Foreground}"/>
        <Path x:Key="Cached" x:Shared="False"
              Data="M19,8L15,12H18A6,6 0 0,1 12,18C11,18 10.03,17.75 9.2,17.3L7.74,18.76C8.97,19.54 10.43,20 12,20A8,8 0 0,0 20,12H23M6,12A6,6 0 0,1 12,6C13,6 13.97,6.25 14.8,6.7L16.26,5.24C15.03,4.46 13.57,4 12,4A8,8 0 0,0 4,12H1L5,16L9,12"
              Fill="{Binding RelativeSource={RelativeSource AncestorType={x:Type ContentControl}}, Path=Foreground}"/>
        <ControlTemplate x:Key="IconButtonTemplate" TargetType="{x:Type ButtonBase}">
            <Border x:Name="border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                <ContentPresenter x:Name="contentPresenter" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" ContentStringFormat="{TemplateBinding ContentStringFormat}" Focusable="False" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
            </Border>
            <ControlTemplate.Triggers>
                <Trigger Property="Button.IsDefaulted" Value="True">
                    <Setter Property="BorderBrush" TargetName="border" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                </Trigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" TargetName="border" Value="#FFBEE6FD"/>
                    <Setter Property="BorderBrush" TargetName="border" Value="#FF3C7FB1"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" TargetName="border" Value="#FFC4E5F6"/>
                    <Setter Property="BorderBrush" TargetName="border" Value="#FF2C628B"/>
                </Trigger>
                <Trigger Property="ToggleButton.IsChecked" Value="True">
                    <Setter Property="Background" TargetName="border" Value="#FFBCDDEE"/>
                    <Setter Property="BorderBrush" TargetName="border" Value="#FF245A83"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Background" TargetName="border" Value="Transparent"/>
                    <Setter Property="BorderBrush" TargetName="border" Value="Transparent"/>
                    <Setter Property="Foreground" Value="#FF838383"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
    </UserControl.Resources>

    <!--<UserControl.DataContext>
        <vmodel:SchedulerViewModel/>
    </UserControl.DataContext>-->

    <Grid >
        <DockPanel>
            <TextBox Text="Season Schedules:" DockPanel.Dock="Top" />
            <StackPanel DockPanel.Dock="Bottom" HorizontalAlignment="Stretch" Orientation="Horizontal" FlowDirection="RightToLeft">
                <Button Command="{Binding CreateScheduleCmd}" BorderBrush="Transparent" Background="Transparent" Template="{DynamicResource IconButtonTemplate}">
                    <Button.Content>
                        <StackPanel Orientation="Horizontal" FlowDirection="LeftToRight">
                            <ContentControl Margin="5,0">
                                <StaticResource ResourceKey="TablePlus"/>
                            </ContentControl>
                            <TextBlock Text="New Schedule"  FontSize="18"/>
                        </StackPanel>
                    </Button.Content>
                </Button>
                <Button Command="{Binding RefreshCmd}" Padding="1" BorderBrush="Transparent" Background="Transparent" Template="{DynamicResource IconButtonTemplate}">
                    <Button.Content>
                        <StackPanel Orientation="Horizontal" FlowDirection="LeftToRight">
                            <ContentControl Margin="5,0">
                                <StaticResource ResourceKey="Cached"/>
                            </ContentControl>
                            <TextBlock Text="Refresh"  FontSize="18"/>
                        </StackPanel>
                    </Button.Content>
                </Button>
            </StackPanel>
            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Visible">
                <ItemsControl ItemsSource="{Binding Schedules}">
                    <ItemsControl.Resources>
                        <DataTemplate DataType="{x:Type vmodel:ScheduleViewModel}">
                            <Grid Margin="2">
                                <Rectangle HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Stroke="Black" StrokeThickness="2" RadiusX="5" RadiusY="5" />
                                <StackPanel Margin="5,2">
                                    <DockPanel>
                                        <Button DockPanel.Dock="Right" x:Name="ScheduleDeleteButton"
                                                Template="{DynamicResource IconButtonTemplate}" Foreground="Red"
                                                BorderBrush="Transparent" Background="Transparent" Padding="2" 
                                                Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}, Path=DataContext.DeleteScheduleCmd}" CommandParameter="{Binding Model}">
                                            <Button.Content>
                                                <StaticResource ResourceKey="closeThick"/>
                                            </Button.Content>
                                        </Button>
                                        <TextBox Text="{Binding Name}"/>
                                    </DockPanel>
                                    <DataGrid ItemsSource="{Binding Sessions}" SelectedItem="{Binding SelectedSession}" SelectionMode="Extended" 
                                          CanUserAddRows="False" CanUserDeleteRows="False" AutoGenerateColumns="False">
                                        <DataGrid.CellStyle>
                                            <Style TargetType="DataGridCell">
                                                <Setter Property="Padding" Value="4,2"/>
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="{x:Type DataGridCell}">
                                                            <Border Padding="{TemplateBinding Padding}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                                                                <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                                <Setter Property="IsManipulationEnabled" Value="False"/>
                                            </Style>
                                        </DataGrid.CellStyle>
                                        <DataGrid.RowHeaderStyle>
                                            <Style TargetType="DataGridRowHeader">
                                                <Setter Property="Padding" Value="4"/>
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="{x:Type DataGridRowHeader}">
                                                            <Border Padding="{TemplateBinding Padding}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                                                                <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                                            </Border>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </DataGrid.RowHeaderStyle>
                                        <DataGrid.Columns>
                                            <DataGridTextColumn Binding="{Binding RaceId}" Header="Race Nr:" IsReadOnly="True" MinWidth="70"/>
                                            <DataGridTextColumn Binding="{Binding Date, StringFormat=d, ConverterCulture=de-DE}" Header="Date:" IsReadOnly="True" MinWidth="100"/>
                                            <DataGridTextColumn Binding="{Binding Location.FullName}" Header="Track:" IsReadOnly="True" MinWidth="450"/>
                                            <DataGridTextColumn Binding="{Binding Laps}" Header="Laps:" IsReadOnly="True" MinWidth="70"/>
                                            <DataGridTextColumn Binding="{Binding SessionStart}" Header="Session Start:" IsReadOnly="True" MinWidth="110"/>
                                            <DataGridTextColumn Header="Practice:" IsReadOnly="True" MinWidth="110">
                                                <DataGridTextColumn.Binding>
                                                    <MultiBinding StringFormat="{}{0:00}:{1:00} - {2:00}:{3:00}">
                                                        <Binding Path="PracticeStart.Hours" />
                                                        <Binding Path="PracticeStart.Minutes"/>
                                                        <Binding Path="PracticeEnd.Hours"/>
                                                        <Binding Path="PracticeEnd.Minutes"/>
                                                    </MultiBinding>
                                                </DataGridTextColumn.Binding>
                                            </DataGridTextColumn>
                                            <DataGridTextColumn Header="Qualy:" IsReadOnly="True" MinWidth="110">
                                                <DataGridTextColumn.Binding>
                                                    <MultiBinding StringFormat="{}{0:00}:{1:00} - {2:00}:{3:00}">
                                                        <Binding Path="QualyStart.Hours"/>
                                                        <Binding Path="QualyStart.Minutes"/>
                                                        <Binding Path="QualyEnd.Hours"/>
                                                        <Binding Path="QualyEnd.Minutes"/>
                                                    </MultiBinding>
                                                </DataGridTextColumn.Binding>
                                            </DataGridTextColumn>
                                            <DataGridTextColumn Header="Race:" IsReadOnly="True" MinWidth="110">
                                                <DataGridTextColumn.Binding>
                                                    <MultiBinding StringFormat="{}{0:00}:{1:00} - {2:00}:{3:00}">
                                                        <Binding Path="RaceStart.Hours"/>
                                                        <Binding Path="RaceStart.Minutes"/>
                                                        <Binding Path="RaceEnd.Hours"/>
                                                        <Binding Path="RaceEnd.Minutes"/>
                                                    </MultiBinding>
                                                </DataGridTextColumn.Binding>
                                            </DataGridTextColumn>
                                            <DataGridTemplateColumn Header="Results"  MinWidth="150">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate DataType="DataGridCell">
                                                        <StackPanel Orientation="Horizontal">
                                                            <Button Command="{Binding UploadFileCmd}" CommandParameter="{Binding}" BorderBrush="Transparent" 
                                                                    Background="Transparent" VerticalAlignment="Center"
                                                                    Template="{DynamicResource IconButtonTemplate}">
                                                                <Button.Content>
                                                                    <StackPanel Orientation="Horizontal">
                                                                        <ContentControl Margin="0,0,5,0">
                                                                            <StaticResource ResourceKey="TableArrowUp"/>
                                                                        </ContentControl>
                                                                        <TextBlock VerticalAlignment="Center" Text=".csv"/>
                                                                    </StackPanel>
                                                                </Button.Content>
                                                            </Button>
                                                            <ContentControl Foreground="Green" Margin="5,0" VerticalAlignment="Center">
                                                                <StaticResource ResourceKey="checkBold"/>
                                                                <ContentControl.Style>
                                                                    <Style TargetType="ContentControl">
                                                                        <Setter Property="VirtualizingPanel.Visibility" Value="Visible"/>
                                                                        <Style.Triggers>
                                                                            <DataTrigger Binding="{Binding ResultAvailable}" Value="False">
                                                                                <Setter Property="Visibility" Value="Hidden" />
                                                                            </DataTrigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </ContentControl.Style>
                                                            </ContentControl>
                                                            <Button Click="DeleteResultButton_Click" Background="Transparent" 
                                                                    BorderBrush="Transparent"
                                                                    VerticalAlignment="Center" Template="{DynamicResource IconButtonTemplate}"
                                                                    Tag="{Binding}">
                                                                <Button.Content>
                                                                    <ContentControl Foreground="Red" Margin="5,0" VerticalAlignment="Center">
                                                                        <StaticResource ResourceKey="closeThick"/>
                                                                    </ContentControl>
                                                                </Button.Content>
                                                                <Button.Style>
                                                                    <Style TargetType="Button">
                                                                        <Setter Property="Visibility" Value="Visible"/>
                                                                        <Style.Triggers>
                                                                            <DataTrigger Binding="{Binding ResultAvailable}" Value="False">
                                                                                <Setter Property="Visibility" Value="Hidden" />
                                                                            </DataTrigger>
                                                                        </Style.Triggers>
                                                                    </Style>
                                                                </Button.Style>
                                                            </Button>
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                            <!--<DataGridCheckBoxColumn Header="IsReadOnly" Binding="{Binding Model.IsReadOnly, Mode=OneWay}"/>-->
                                        </DataGrid.Columns>
                                    </DataGrid>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                        <TextBlock Text="Sessions: " Margin="5" />
                                        <Button Click="AddButton_Click" Background="Transparent"  BorderBrush="Transparent"
                                                Template="{DynamicResource IconButtonTemplate}">
                                            <Button.Style>
                                                <Style TargetType="Button" BasedOn="{StaticResource ButtonStyle}" >
                                                    <Setter Property="IsEnabled" Value="True"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding Sessions}" Value="{x:Null}">
                                                            <Setter Property="IsEnabled" Value="False"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Model.IsReadOnly}" Value="True">
                                                            <Setter Property="IsEnabled" Value="False"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Button.Style>
                                            <Button.Content>
                                                <StackPanel Orientation="Horizontal">
                                                    <ContentControl Margin="0,0,5,0">
                                                        <StaticResource ResourceKey="PlusThick"/>
                                                    </ContentControl>
                                                    <TextBlock Text="Add" VerticalAlignment="Center"/>
                                                </StackPanel>
                                            </Button.Content>
                                        </Button>
                                        <Button Click="EditButton_Click" Tag="{Binding SelectedSession}" BorderBrush="Transparent" Background="Transparent"
                                                Template="{DynamicResource IconButtonTemplate}">
                                            <Button.Style>
                                                <Style TargetType="Button" BasedOn="{StaticResource ButtonStyle}">
                                                    <Setter Property="IsEnabled" Value="True"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding SelectedSession}" Value="{x:Null}">
                                                            <Setter Property="IsEnabled" Value="False"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Model.IsReadOnly}" Value="True">
                                                            <Setter Property="IsEnabled" Value="False"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Button.Style>
                                            <Button.Content>
                                                <StackPanel Orientation="Horizontal">
                                                    <ContentControl Margin="0,0,5,0">
                                                        <StaticResource ResourceKey="pencilOutline"/>
                                                    </ContentControl>
                                                    <TextBlock Text="Edit" VerticalAlignment="Center"/>
                                                </StackPanel>
                                            </Button.Content>
                                        </Button>
                                        <Button Click="MoveSessionButton_Click" Tag="{Binding SelectedSession}" BorderBrush="Transparent" Background="Transparent"
                                                Template="{DynamicResource IconButtonTemplate}" Visibility="Visible">
                                            <Button.Style>
                                                <Style TargetType="Button" BasedOn="{StaticResource ButtonStyle}">
                                                    <Setter Property="IsEnabled" Value="True"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding SelectedSession}" Value="{x:Null}">
                                                            <Setter Property="IsEnabled" Value="False"/>
                                                        </DataTrigger>
                                                        <DataTrigger Binding="{Binding Model.IsReadOnly}" Value="True">
                                                            <Setter Property="IsEnabled" Value="False"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Button.Style>
                                            <Button.Content>
                                                <StackPanel Orientation="Horizontal">
                                                    <ContentControl Margin="0,0,5,0">
                                                        <StaticResource ResourceKey="CursorMove"/>
                                                    </ContentControl>
                                                    <TextBlock Text="Move" VerticalAlignment="Center"/>
                                                </StackPanel>
                                            </Button.Content>
                                        </Button>
                                        <Button Command="{Binding DeleteSessionsCmd}" BorderBrush="Transparent" Background="Transparent"
                                                Template="{DynamicResource IconButtonTemplate}">
                                            <Button.Content>
                                                <StackPanel Orientation="Horizontal">
                                                    <ContentControl Margin="0,0,5,0">
                                                        <StaticResource ResourceKey="delete"/>
                                                    </ContentControl>
                                                    <TextBlock Text="Delete" VerticalAlignment="Center"/>
                                                </StackPanel>
                                            </Button.Content>
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding Model.IsReadOnly}" Value="True">
                                                            <Setter Property="IsEnabled" Value="False"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Button.Style>
                                        </Button>
                                    </StackPanel>
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </ItemsControl.Resources>
                </ItemsControl>
            </ScrollViewer>
        </DockPanel>

    </Grid>
</UserControl>
